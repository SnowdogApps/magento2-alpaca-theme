<?php
/** @var $block \Magento\Framework\View\Element\Template */
/** @var $helper \Magento\Search\Helper\Data */
$helper = $this->helper('Magento\Search\Helper\Data');
?>

<form
    class="search-form"
    id="search_mini_form"
    action="<?= $escaper->escapeUrl($helper->getResultUrl()) ?>"
    method="get"
>
    <div class="input search-form__input-wrapper">
        <label class="label label--hidden" for="search">
            <?= $escaper->escapeHtml(__('Search')) ?>
        </label>

        <input
            class="input__field search-form__input"
            id="search"
            data-mage-init='{
                "quickSearch": {
                   "formSelector": "#search_mini_form",
                   "url": "/snownav.php",
                   "destinationSelector": "#search_autocomplete"
                }
            }'
            type="search"
            name="<?= $escaper->escapeHtmlAttr($helper->getQueryParamName()); ?>"
            value="<?= $escaper->escapeHtmlAttr($helper->getEscapedQueryText()); ?>"
            placeholder="<?= $escaper->escapeHtmlAttr(__('Search entire store here...')); ?>"
            maxlength="<?= (int) $helper->getMaxQueryLength(); ?>"
            role="combobox"
            aria-haspopup="false"
            aria-autocomplete="none"
            autocomplete="off"
        >
        <button
            class="button button--icon search-form__button"
            type="submit"
            aria-label="<?= $escaper->escapeHtmlAttr(__('Search')) ?>"
            data-testid="search-link"
        >
            <svg class="button__icon" role="img">
                <title><?= $escaper->escapeHtml(__('Search')) ?></title>
                <use href="<?= $escaper->escapeUrl($block->getViewFileUrl('/images/icons-sprite.svg#search')) ?>"></use>
            </svg>
        </button>
    </div>

    <div class="quicksearch">
        <button
            class="button button--icon quicksearch__close-button"
            type="button"
            aria-label="Close quicksearch"
        >
            <svg class="button__icon quicksearch__close-icon" role="img">
                <title><?= $escaper->escapeHtml(__('Close')) ?></title>
                <use href="<?= $escaper->escapeUrl($block->getViewFileUrl('images/icons-sprite.svg#close')) ?>"></use>
            </svg>
        </button>
        <div id="search_autocomplete"></div>
    </div>
</form>
