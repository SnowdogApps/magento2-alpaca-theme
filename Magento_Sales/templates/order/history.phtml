<?php

// @codingStandardsIgnoreFile

?>
<?php $_orders = $block->getOrders(); ?>
<?php echo $block->getChildHtml('info'); ?>

<div class="users-account">
<?php if ($_orders && count($_orders)): ?>
        <h2 id="orders-history-table">
            <?php /* @escapeNotVerified */ echo __('Orders'); ?>
        </h2>
        <div class="table-wrapper orders-history">
            <table class="data table table-order-items history"
                   id="my-orders-table"
                   aria-labelledby="orders-history-table"
            >
                <thead>
                    <tr>
                        <th scope="col" class="col id">
                            <?php /* @escapeNotVerified */ echo __('Order #'); ?>
                        </th>
                        <th scope="col" class="col date">
                            <?php /* @escapeNotVerified */ echo __('Date'); ?>
                        </th>
                        <?php /* @noEscape */ echo $block->getChildHtml('extra.column.header'); ?>
                        <th scope="col" class="col shipping">
                            <?php /* @escapeNotVerified */ echo __('Ship To'); ?>
                        </th>
                        <th scope="col" class="col total">
                            <?php /* @escapeNotVerified */ echo __('Order Total'); ?>
                        </th>
                        <th scope="col" class="col status">
                            <?php /* @escapeNotVerified */ echo __('Status'); ?>
                        </th>
                        <th scope="col" class="col actions">
                            &nbsp;
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <?php foreach ($_orders as $_order): ?>
                        <tr>
                            <td data-th="<?php echo $block->escapeHtml(__('Order #')); ?>"
                                class="col id"
                            >
                                <?php /* @escapeNotVerified */ echo $_order->getRealOrderId(); ?>
                            </td>
                            <td data-th="<?php echo $block->escapeHtml(__('Date')); ?>"
                                class="col date"
                            >
                                <?php /* @escapeNotVerified */ echo $block->formatDate($_order->getCreatedAt()) ?>
                            </td>
                            <?php $extra = $block->getChildBlock('extra.container'); ?>
                            <?php if ($extra): ?>
                                <?php $extra->setOrder($_order); ?>
                                <?php /* @noEscape */ echo $extra->getChildHtml() ?>
                            <?php endif; ?>
                            <td data-th="<?php echo $block->escapeHtml(__('Ship To')) ?>"
                                class="col shipping"
                            >
                                <?php echo $_order->getShippingAddress() ? $block->escapeHtml($_order->getShippingAddress()->getName()) : '&nbsp;'; ?>
                            </td>
                            <td data-th="<?php echo $block->escapeHtml(__('Order Total')); ?>"
                                class="col total"
                            >
                                <?php /* @escapeNotVerified */ echo $_order->formatPrice($_order->getGrandTotal()) ?>
                            </td>
                            <td data-th="<?php echo $block->escapeHtml(__('Status')); ?>"
                                class="col status"
                            >
                                <?php /* @escapeNotVerified */ echo $_order->getStatusLabel() ?>
                            </td>
                            <td data-th="<?php echo $block->escapeHtml(__('Actions')); ?>"
                                class="col actions"
                            >
                                <a href="<?php /* @escapeNotVerified */ echo $block->getViewUrl($_order); ?>"
                                   class="action view"
                                >
                                    <?php /* @escapeNotVerified */ echo __('View Order'); ?>
                                </a>
                                <?php if ($this->helper('Magento\Sales\Helper\Reorder')->canReorder($_order->getEntityId())) : ?>
                                    <a href="#"
                                       data-post='<?php /* @escapeNotVerified */ echo $this->helper(\Magento\Framework\Data\Helper\PostHelper::class)->getPostData($block->getReorderUrl($_order)); ?>'
                                       class="action order"
                                    >
                                        <?php /* @escapeNotVerified */ echo __('Reorder'); ?>
                                    </a>
                                <?php endif ?>
                            </td>
                        </tr>
                    <?php endforeach; ?>
                </tbody>
            </table>
        </div>
        <?php if ($block->getPagerHtml()): ?>
            <div class="order-products-toolbar toolbar bottom">
                <?php echo $block->getPagerHtml(); ?>
            </div>
        <?php endif ?>
<?php else: ?>
    <div class="message info empty">
        <div class="message__container">
            <div class="message__text">
                <?php /* @escapeNotVerified */ echo __('You have placed no orders.'); ?>
            </div>
        </div>
    </div>
<?php endif ?>
</div>
