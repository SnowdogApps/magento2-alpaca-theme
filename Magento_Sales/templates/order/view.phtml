<?php
// phpcs:disable Magento2.Templates.ThisInTemplate
?>
<?php $_order = $block->getOrder() ?>

<?= $block->getChildHtml('order_links') ?>
<?= $block->getChildHtml('order_items') ?>

<?php
    $isMessageAllowed = $this->helper(\Magento\GiftMessage\Helper\Message::class)->isMessagesAllowed('order', $_order);
?>

<?php if ($isMessageAllowed && $_order->getGiftMessageId()): ?>
    <div class="dashboard__handler">
        <h4 class="dashboard__title--wrapped">
            <?= $escaper->escapeHtml(__('Gift Message for This Order')) ?>
        </h4>
    </div>

    <?php
        $_giftMessage = $this->helper(\Magento\GiftMessage\Helper\Message::class)->getGiftMessageForEntity($_order);
        $getGiftMessage = $this->helper(\Magento\GiftMessage\Helper\Message::class)->getEscapedGiftMessage($_order);
    ?>

    <div class="row">
        <div class="col-sm-6 information">
            <h5 class="information__title">
                <?= $escaper->escapeHtml(__('From')) ?>
            </h5>

            <p class="information__text">
                <?= $escaper->escapeHtml($_giftMessage->getSender()) ?>
            </p>
        </div>

        <div class="col-sm-6 information">
            <h5 class="information__title">
                <?= $escaper->escapeHtml(__('To')) ?>
            </h5>

            <p class="information__text">
                <?= $escaper->escapeHtml($_giftMessage->getRecipient()) ?>
            </p>

            <p class="information__text">
                <?= /* @escapeNotVerified */ $getGiftMessage; ?>
            </p>
        </div>
    </div>
<?php endif; ?>

<div class="action dashboard__item">
    <div class="action__handler">
        <a class="link action__link"
            href="<?= $escaper->escapeUrl($block->getBackUrl()) ?>"
        >
            <?= $escaper->escapeHtml($block->getBackTitle()) ?>
        </a>
    </div>
</div>
