<div class="dashboard-table dashboard-table--tab">
    <?php $_order = $block->getOrder(); ?>

    <div class="dashboard-table__header">
        <h3 class="dashboard-table__title">
            <?= $escaper->escapeHtml(__('Refund #')) ?>
            <?= $_order->getIncrementId(); ?>
        </h3>

        <?php if (sizeof($_order->getItems()) > 0): ?>
            <a class="link dashboard-table__link"
               href="<?= $escaper->escapeUrl($block->getPrintAllCreditmemosUrl($_order)) ?>"
               target="_blank"
               rel="noopener"
            >
                <?= $escaper->escapeHtml(__('Print All Refunds')) ?>
            </a>
        <?php endif; ?>
    </div>

    <?php foreach ($_order->getCreditmemosCollection() as $_creditmemo): ?>
        <div class="dashboard-table__content">
            <table
                class="table dashboard-table__table"
                id="my-refund-table-<?= (int) $_creditmemo->getId() ?>"
            >
                <thead>
                    <tr>
                        <th class="name">
                            <?= $escaper->escapeHtml(__('Product Name')) ?>
                        </th>

                        <th class="sku">
                            <?= $escaper->escapeHtml(__('SKU')) ?>
                        </th>

                        <th class="price">
                            <?= $escaper->escapeHtml(__('Price')) ?>
                        </th>

                        <th class="qty">
                            <?= $escaper->escapeHtml(__('Qty')) ?>
                        </th>

                        <th class="subtotal">
                            <?= $escaper->escapeHtml(__('Subtotal')) ?>
                        </th>

                        <th class="discount">
                            <?= $escaper->escapeHtml(__('Discount Amount')) ?>
                        </th>

                        <th class="total">
                            <?= $escaper->escapeHtml(__('Row Total')) ?>
                        </th>
                    </tr>
                </thead>

                <?php $_items = $_creditmemo->getAllItems(); ?>
                <?php $_count = count($_items) ?>

                <?php foreach ($_items as $_item): ?>
                    <?php if ($_item->getOrderItem()->getParentItem()): continue; endif; ?>

                    <tbody>
                        <?= $block->getItemHtml($_item) ?>
                    </tbody>
                <?php endforeach; ?>

                <tfoot>
                    <?= $block->getTotalsHtml($_creditmemo); ?>
                </tfoot>
            </table>
        </div>

        <?= $block->getCommentsHtml($_creditmemo) ?>
    <?php endforeach; ?>
</div>
