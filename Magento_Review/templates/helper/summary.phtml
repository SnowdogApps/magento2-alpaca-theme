<?php $url = $block->getReviewsUrl() . '#reviews'; ?>
<?php $urlForm = $block->getReviewsUrl() . '#review-form'; ?>

<div class="review review--summary">
    <?php if ($block->isReviewEnabled() && $block->getReviewsCount()) : ?>
        <?php
            $rating = $block->getRatingSummary();
            $reviewsCount = $block->getReviewsCount();
        ?>
        <?php if ($rating): ?>
            <div class="review__summary-handle">
                <div
                    class="rating"
                    aria-label="<?= $escaper->escapeHtmlAttr(__('Average rating') . ': ' . $rating . '%'); ?>"
                    title="<?= $escaper->escapeHtmlAttr(__('Average rating') . ': ' . $rating . '%'); ?>"
                    tabindex="0"
                >
                    <div
                        class="rating__star"
                        role="presentation"
                        style="width:<?=  $rating; ?>%"
                    >
                        <span class="rating__indicator"></span>
                    </div>
                </div>

                <a
                    href="<?= $escaper->escapeUrl($url) ?>"
                    class="review__amount"
                    title="<?= $escaper->escapeHtmlAttr($reviewsCount . __(' reviews')); ?>"
                    data-mage-init='{ "goToReview": { "reviewId": "reviews" } }'
                    aria-label="<?= $escaper->escapeHtmlAttr(__('See ') . $reviewsCount . __(' reviews')); ?>"
                >
                    (<?= $block->getReviewsCount() ?>)
                </a>
                <span class="review__amount-text">
                    <?= $escaper->escapeHtml($reviewsCount . __(' Reviews')); ?>
                </span>
                <a
                    href="<?= $escaper->escapeUrl($urlForm) ?>"
                    title="<?= $escaper->escapeHtmlAttr(__('Add Your Review')) ?>"
                    class="review__summary-add"
                    data-mage-init='{ "goToReview": { "reviewId": "review-form" } }'
                >
                    <?= $escaper->escapeHtml(__('Add Your Review')) ?>
                </a>
            </div>
        <?php endif; ?>
    <?php elseif ($block->isReviewEnabled() && $block->getDisplayIfEmpty()) : ?>
        <a
            href="<?= $escaper->escapeUrl($urlForm); ?>"
            title="<?= $escaper->escapeHtmlAttr(__('Be the first to review this product')) ?>"
            data-mage-init='{ "goToReview": { "reviewId": "review-form" } }'
        >
            <?=  $escaper->escapeHtml(__('Be the first to review this product')) ?>
        </a>
    <?php endif; ?>
</div>
