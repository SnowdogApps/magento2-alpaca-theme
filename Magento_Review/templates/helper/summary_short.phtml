<?php
/** @var \Magento\Review\Block\Product\ReviewRenderer $block */

$urlForm = $block->escapeUrl($block->getReviewsUrl()) . '#review-form';
?>
<?php if ($block->isReviewEnabled() && $block->getReviewsCount()): ?>
    <?php $rating = $block->escapeHtmlAttr($block->getRatingSummary()); ?>
    <div class="product-reviews-summary short<?= !$rating ? ' no-rating' : '' ?>">
        <?php if ($rating): ?>
            <?php
            $productName = $block->escapeHtmlAttr($this->getProduct()->getName());
            ?>
            <div
                class="rating rating--secondary"
                role="region"
                aria-label="<?= $block->escapeHtmlAttr(__('Average rating')) . 'for ' . $productName ?>: <?= $rating ?>%"
                title="<?= $block->escapeHtmlAttr(__('Average rating')) . 'for ' . $productName ?>: <?= $rating ?>%"
                tabindex="0"
            >
                <div
                    class="rating__star"
                    role="presentation"
                    style="width: <?= $rating ?>%"
                >
                    <span class="rating__indicator"></span>
                </div>
            </div>
        <?php endif;?>
    </div>
<?php elseif ($block->isReviewEnabled() && $block->getDisplayIfEmpty()): ?>
    <div
        class="
            rating
            rating--empty
            "
        >
        <a
            class="action add"
            href="<?=  $urlForm ?>"
        >
            <?=  $block->escapeHtml(__('Be the first to review this product')) ?>
        </a>
    </div>

<?php endif; ?>
