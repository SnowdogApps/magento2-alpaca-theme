<?php
/**
 * Template for filter items block
 *
 * @var $block \Smile\ElasticsuiteCatalog\Block\Navigation\FilterRenderer
 */
?>
<?php
$datasId = $this->getFilter()->getRequestVar();
$datascope = $datasId . 'Filter';
?>
<li
    class="
        dropdown-list__item
        dropdown-list__item--collapse
        filter
        filter--checkbox
    "
>
    <div
        class="
            dropdown-list__label-wrapper
            filter__label-wrapper
        "
    >
        <button
            type="button"
            class="dropdown-list__label"
            aria-controls="<?= $block->escapeHtmlAttr($datascope) ?>"
            aria-expanded="true"
        >
            <h3 class="filter__heading">
                <?= $block->escapeHtml($this->getFilter()->getName()); ?>
            </h3>
            <svg
                class="
                    icon
                    dropdown-list__icon
                "
                role="presentation"
                focusable="false"
            >
                <use href="<?= $block->escapeUrl($block->getViewFileUrl('images/icons-sprite.svg#angle-down')); ?>"></use>
            </svg>
        </button>
    </div>

    <div
        class="
            dropdown-list__content
            filter__content
        "
        id="<?= $block->escapeHtmlAttr($datascope) ?>"
        aria-hidden="false"
    >
        <div
            class="more-info"
            data-mage-init='{
                "moreInfo": {
                    "path": "/rest/V1/snowproductattributedescription/description/:attributeCode",
                    "variable": ":attributeCode",
                    "data": "<?= $block->escapeJs($datasId) ?>"
                }
            }'
            aria-hidden="true"
        >
            <button
                class="
                    button
                    button--icon
                    button--fluid
                    more-info__trigger
                "
                type="button"
                aria-expanded="false"
            >
                <span class="button__text">
                    <?= $block->escapeHtml(__('More information')) ?>
                </span>
                <svg
                    class="
                        icon
                        button__icon
                    "
                    role="presentation"
                    focusable="false"
                >
                    <use href="<?= $block->escapeUrl($block->getViewFileUrl('images/icons-sprite.svg#info')); ?>"></use>
                </svg>
            </button>

            <div
                class="more-info__content-wrapper"
                aria-hidden="true"
            >
                <div class="more-info__content">
                    <h3 class="more-info__heading">
                        <?= $block->escapeHtml($this->getFilter()->getName()); ?>
                    </h3>

                    <div class="more-info__data"></div>

                    <button
                        class="
                            button
                            button--icon
                            button--rotate-icon
                            more-info__close
                        "
                        type="button"
                        aria-label="<?= $block->escapeHtmlAttr(__('Close more information')) ?>"
                    >
                        <svg
                            class="icon"
                            role="presentation"
                            focusable="false"
                        >
                            <use href="<?= $block->escapeUrl($block->getViewFileUrl('images/icons-sprite.svg#close')); ?>"></use>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <div data-bind="scope: '<?= $block->escapeHtmlAttr($datascope); ?>'">
            <!-- ko template: getTemplate() --> <!-- /ko -->
        </div>

        <script type="text/x-magento-init">
            {
                "*" : {
                    "Magento_Ui/js/core/app": {
                        "components": {
                            "<?= $block->escapeJs($datascope); ?>": <?= /* @escapeNotVerified */ $this->getJsLayout(); ?>
                        }
                    }
                }
            }
        </script>
    </div>
</li>
