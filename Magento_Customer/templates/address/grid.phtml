<?php

/** @var \Magento\Customer\Block\Address\Grid $block */
$customerAddressView = $block->getData('customer_address');
?>

<div class="dashboard-table">
    <div class="dashboard-table__header">
        <h3 class="dashboard-table__title">
            <?= $escaper->escapeHtml(__('Additional Address Entries')); ?>
        </h3>
    </div>
    <?php if ($_pAddsses = $block->getAdditionalAddresses()) : ?>
        <div class="dashboard-table__content">
            <table 
                class="table dashboard-table__table" 
                id="additional-addresses-table"
            >
                <thead>
                    <tr>
                        <th scope="col" class="col firstname">
                            <?= $escaper->escapeHtml(__('First Name')) ?>
                        </th>
                        <th scope="col" class="col lastname">
                            <?= $escaper->escapeHtml(__('Last Name')) ?>
                        </th>
                        <th scope="col" class="col streetaddress">
                            <?= $escaper->escapeHtml(__('Street Address')) ?>
                        </th>
                        <th scope="col" class="col city">
                            <?= $escaper->escapeHtml(__('City')) ?>
                        </th>
                        <th scope="col" class="col country">
                            <?= $escaper->escapeHtml(__('Country')) ?>
                        </th>
                        <th scope="col" class="col state">
                            <?= $escaper->escapeHtml(__('State')) ?>
                        </th>
                        <th scope="col" class="col zip">
                            <?= $escaper->escapeHtml(__('Zip/Postal Code')) ?>
                        </th>
                        <th scope="col" class="col phone">
                            <?= $escaper->escapeHtml(__('Phone')) ?>
                        </th>
                        <th scope="col" class="col actions">
                            &nbsp;
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <?php foreach ($_pAddsses as $address) : ?>
                        <tr>
                            <td 
                                data-th="<?= $escaper->escapeHtmlAttr(__('First Name')) ?>" 
                                class="col firstname"
                            >
                                <?= $escaper->escapeHtml($address->getFirstname()) ?>
                            </td>
                            <td 
                                data-th="<?= $escaper->escapeHtmlAttr(__('Last Name')) ?>" 
                                class="col lastname"
                            >
                                <?= $escaper->escapeHtml($address->getLastname()) ?>
                            </td>
                            <td 
                                data-th="<?= $escaper->escapeHtmlAttr(__('Street Address')) ?>" 
                                class="col streetaddress"
                            >
                                <?= $escaper->escapeHtml($block->getStreetAddress($address)) ?>
                            </td>
                            <td 
                                data-th="<?= $escaper->escapeHtmlAttr(__('City')) ?>" 
                                class="col city"
                            >
                                <?= $escaper->escapeHtml($address->getCity()) ?>
                            </td>
                            <td 
                                data-th="<?= $escaper->escapeHtmlAttr(__('Country')) ?>" 
                                class="col country"
                            >
                                <?= $escaper->escapeHtml($block->getCountryByCode($address->getCountryId())) ?>
                            </td>
                            <td 
                                data-th="<?= $escaper->escapeHtmlAttr(__('State')) ?>" 
                                class="col state"
                            >
                                <?= $escaper->escapeHtml($address->getRegion()->getRegion()) ?>
                            </td>
                            <td 
                                data-th="<?= $escaper->escapeHtmlAttr(__('Zip/Postal Code')) ?>" class="col zip"><?= $escaper->escapeHtml($address->getPostcode()) ?></td>
                            <td 
                                data-th="<?= $escaper->escapeHtmlAttr(__('Phone')) ?>" 
                                class="col phone"
                            >
                                <?= $escaper->escapeHtml($address->getTelephone()) ?>
                            </td>
                            <td 
                                data-th="<?= $escaper->escapeHtmlAttr(__('Actions')) ?>" 
                                class="col actions"
                            >
                                <a 
                                    class="action edit" 
                                    href="<?= $escaper->escapeUrl($block->getUrl('customer/address/edit', ['id' => $address->getId()])) ?>"
                                >
                                    <?= $escaper->escapeHtml(__('Edit')) ?>
                                </a>
                                <a 
                                    class="action delete" 
                                    href="#" 
                                    role="delete-address" 
                                    data-address="<?= $escaper->escapeHtmlAttr($address->getId()) ?>"
                                >
                                    <?= $escaper->escapeHtml(__('Delete')) ?>
                                </a>
                            </td>
                        </tr>
                    <?php endforeach; ?>
                </tbody>
            </table>
        </div>
        <?php if ($block->getChildHtml('pager')) : ?>
            <?= $block->getChildHtml('pager') ?>
        <?php endif ?>
    <?php else : ?>
        <p class="message info empty">
            <?= $escaper->escapeHtml(__('You have no other address entries in your address book.')) ?>
        </p>
    <?php endif ?>
</>

<div class="action">
    <div class="action__handler">
        <button 
            type="button" 
            role="add-address" 
            title="<?= $escaper->escapeHtmlAttr(__('Add New Address')) ?>" 
            class="
                button 
                action__button 
                primary 
                add
            "
        >
            <?= $escaper->escapeHtml(__('Add New Address')) ?>
        </button>
    </div>
    <div class="action__handler">
        <a 
            class="link action__link action back" 
            href="<?= $escaper->escapeUrl($block->getUrl('customer/account')) ?>"
        >
            <?= $escaper->escapeHtml(__('Back')) ?>
        </a>
    </div>
</div>
<script type="text/x-magento-init">
    {
        ".page-main": {
            "address": {
                "deleteAddress": "td a[role='delete-address']",
                "deleteUrlPrefix": "<?= $escaper->escapeJs($escaper->escapeUrl($block->getDeleteUrl())) ?>id/",
                "addAddress": "button[role='add-address']",
                "addAddressLocation": "<?= $escaper->escapeJs($escaper->escapeUrl($block->getAddAddressUrl())) ?>"
            }
        }
    }
</script>
